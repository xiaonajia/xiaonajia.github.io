<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>canvas小练习</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<style type="text/css">
		*{padding:0; margin:0;}
		html{height:100%;}
		body{background:#B72C2C; padding:4%; height:92%;}
		.pad{width:100%; height:60%;}
		.pad canvas{width:100%; background:#fff; border-radius: 20px;}
	</style>	
</head>
<body>
	<div id="pad" class="pad">
		<canvas id="canvas"></canvas>
	</div>
</body>
<script type="text/javascript">
	window.onload = function(){

		var pad = document.getElementById('pad');
		var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext('2d');
		canvas.width = pad.clientWidth;
		canvas.height = pad.clientHeight;
		var r = 2; // 半径

		var mouseIsDown = false;   //判断是否按下
		var x = 0, y = 0;
		var offsetLeft = pad.offsetLeft;
		var offsetTop = pad.offsetTop;
		var speed = 4; // 判断速度

		function isDown(e){
			e.preventDefault();
			if(e.changedTouches){                         
				e=e.changedTouches[e.changedTouches.length-1];                     
			}
			x = e.clientX + document.body.scrollLeft - offsetLeft;
			y = e.clientY + document.body.scrollTop - offsetTop;
			with(ctx){
				beginPath();
				arc(x,y,r,0,Math.PI*2,true);
				fill();
			}
			mouseIsDown = true;
		}

		function down(e){
			if(mouseIsDown){
				if(e.changedTouches){                         
					e=e.changedTouches[e.changedTouches.length-1];                     
				}
				var x0 = e.clientX + document.body.scrollLeft - offsetLeft;
				var y0 = e.clientY + document.body.scrollTop - offsetTop;

				//控制毛笔的粗细
				/*var s = Math.sqrt(Math.pow(x0-x,2) + Math.pow(y0-y,2));
				if(s<speed){
					if(r <=6) r+=1;
				}else{
					if(r>3) r-=1
				}*/

				with(ctx){
					beginPath();
					lineWidth = r*2;
					moveTo(x,y);
					lineTo(x0,y0);
					// lineJoin = 'round';
					stroke();

					beginPath()                     
					arc(x0, y0, r, 0, Math.PI*2,true);                         
					fill();
				}
				mouseIsDown = true;
			}
			x = x0;
			y = y0;
		}
		function isUp(e){
			e.preventDefault();
			mouseIsDown = false;
			r=2;
		}
		canvas.addEventListener('mousedown',isDown);
		canvas.addEventListener('mousemove',down);
		canvas.addEventListener('mouseup',isUp);
		canvas.addEventListener('touchstart',isDown);
		canvas.addEventListener('touchmove',down);
		canvas.addEventListener('touchend',isUp);
	};

/*
	1.动态取到canvas的宽高，显示出来；
	2.获取上下文对象；
	3.绘图方法：
		（1）绘制路径:
			ctxt.beginPath(); 开始路径
			ctxt.moveTo(0,0); 起点
			ctxt.lineTo(200,200); 终点，直线
			ctxt.lineWidth=1.0; 线的宽度
			ctxt.strokeStyle = 'green'; 线的颜色
			ctxt.stroke(); 上色
			ctxt.closePath(); 关闭路径，封闭图形

		（2）绘制矩形：
			ctxt.fillStyle = 'green' ;  颜色
			ctxt.fillRect(0,0,width,height);   绘制实心矩形，起点(0,0),长width，高height 
			ctxt.strokeRect(0,0,width,height);  空心矩形
			ctxt.clearRect();  清除矩形

		（3）绘制文本：
			ctxt.font = 'Bold 20px Arial' // 文本样式
			ctxt.textAlign = 'left' //对齐方式
			ctxt.fillStyle = 'green' //颜色
			ctxt.fillText('hello',10,50); //hello 写的文本，(10,50)起点坐标 ，不支持换行
			ctxt.strokeText('hello',10,50); //空心文字

		（4）画圆和扇形
			ctxt.arc(60,60,50,0,Math.PI*2,true) 
				// (60,60)圆心坐标，50半径,(0,Math.PI*2)是起始角度和结束角度
				//true逆时针画，true顺时针画

		（5）渐变
			var gradient = ctxt.createLinearGradient(0,0,0,160); //(0,0)起点坐标，(0,160)终点坐标
			gradient.addColorStop(0,'green');
			gradient.addColorStop(1,'red'); 
			ctxt.fillStyle = gradient;
			ctxt.fillRect = (0,0,200,200); //实心渐变色的矩形

		（6）阴影

	4.图像处理方法
		（1）drawImage(img,0,0) 重绘图像 //img(图片对象)，(0,0)图片在canvas上的位置
		（2）getImageData()   获取canvas上的内容
*/
</script>
</html>